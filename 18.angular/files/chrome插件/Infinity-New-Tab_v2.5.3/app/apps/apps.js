$(document).ready(function(){window.$App={ini:function(){$App.loadApps();$App.disableOrEnable();$App.launch();$App.appManage()},loadApps:function(){chrome.management.getAll(function(a){for(var c="",d="",e=a.length,b=0;b<e;b++)if(a[b].isApp)var f=a[b].icons[a[b].icons.length-1].url,c=c+('<div class="appIconOut" enabled="'+a[b].enabled+'"  appid="'+a[b].id+'" name="'+a[b].name+'"><div class="appIcon extEnabled'+(a[b].enabled?"true":"false")+'" style="background-image:url('+f+')"></div><div class="appName">'+
a[b].name+"</div></div>");else{try{f=a[b].icons[1].url}catch(g){try{f=a[b].icons[a[b].icons.length-1].url}catch(h){f="img/noapp.png"}}d+='<div class="extensionItem"><img src="'+f+'" class="extEnabled'+(a[b].enabled?"true":"false")+'"><div class="extensionItemName extensionItemName'+(a[b].enabled?"true":"false")+'">'+a[b].name+'</div><div appid="'+a[b].id+'" name="'+a[b].name+'" enabled="'+a[b].enabled+'" class="extensionItemAble extensionItemAble'+(a[b].enabled?"true":"false")+'">'+(a[b].enabled?
i18n("Disable"):i18n("Enable"))+'</div><div appid="'+a[b].id+'" name="'+a[b].name+'" class="extensionItemDelete"></div></div><div style="clear:both"></div>'}$("#AllApps").html(c);$("#AllExts").html(d)})},disableOrEnable:function(){$(".extensionItemAble").live("click",function(a){a=$(this).attr("enabled");var c=$(this).attr("appid"),d=$(this).attr("name"),e=$(this);"true"==a?chrome.management.setEnabled(c,!1,function(){e.parent().fadeOut(200,function(){$App.loadApps();var a=d+i18n("HasBeenDisabled");
$notification.show(a,1)})}):chrome.management.setEnabled(c,!0,function(){e.parent().fadeOut(200,function(){$App.loadApps();var a=d+i18n("HasBeenEnabled");$notification.show(a,1)})})});$(".extensionItemDelete").live("click",function(a){var c=$(this).attr("appid"),d=$(this).attr("name"),e=$(this);chrome.management.uninstall(c,function(){chrome.management.get(c,function(a){try{a.id}catch(c){e.parent().fadeOut(200,function(){$App.loadApps();var a=d+i18n("HasBeenUninstalled");$notification.show(a,1)})}})})})},
launch:function(){$(".appIconOut").live("click",function(a){a=$(this).attr("enabled");var c=$(this).attr("appid");"false"==a?(a=i18n("PleaseEnableIt"),$notification.show(a)):chrome.management.launchApp(c)})},appManage:function(){$(".appIconOut").live("mousedown",function(a){if(3==a.which){a.preventDefault();$App.obj=$(this);"true"==$(this).attr("enabled")?$("#appdisable").text(i18n("Disable")):$("#appdisable").text(i18n("Enable"));var c=a.clientX;a=a.clientY;$("#rightMenu").attr({appid:$(this).attr("appid"),
name:$(this).attr("name"),enabled:$(this).attr("enabled")});$("#rightMenu").css({top:a+"px",left:c+"px"});$("#rightMenu").fadeIn(100)}});$("#appdisable").live("click",function(a){a=$("#rightMenu").attr("appid");var c=$("#rightMenu").attr("name"),d=$("#rightMenu").attr("enabled"),e=$App.obj;"true"==d?chrome.management.setEnabled(a,!1,function(){e.fadeOut(200,function(){$App.loadApps();var a=c+i18n("HasBeenDisabled");$notification.show(a,1);$("#rightMenu").hide()})}):chrome.management.setEnabled(a,
!0,function(){e.fadeOut(200,function(){$App.loadApps();var a=c+i18n("HasBeenEnabled");$notification.show(a,1);$("#rightMenu").hide()})})});$("#appUnistall").live("click",function(a){var c=$("#rightMenu").attr("appid"),d=$("#rightMenu").attr("name");$("#rightMenu").attr("enabled");var e=$App.obj;chrome.management.uninstall(c,function(){chrome.management.get(c,function(a){try{a.id}catch(c){e.fadeOut(200,function(){$App.loadApps();var a=d+i18n("HasBeenUninstalled");$notification.show(a,1);$("#rightMenu").hide()})}})})});
$(document).mousedown(function(a){1==a.which&&"rightMenuItem"!=a.target.className&&$("#rightMenu").fadeOut(100)})}};$App.ini()});