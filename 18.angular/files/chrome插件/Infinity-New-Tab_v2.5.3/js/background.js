window.i18n=function(d){try{return chrome.i18n.getMessage(d)}catch(b){return d}};window.isZh=function(){return"zh"==i18n("lang")?!0:!1};
window.$setlang={ini:function(){for(var d=$("[i18n]").length,b=0;b<d;b++){var a=$("[i18n]")[b],c=a.getAttribute("i18n"),c=i18n(c);$(a).text(c)}d=$("[i18nh]").length;for(b=0;b<d;b++)a=$("[i18nh]")[b],c=a.getAttribute("i18nh"),c=i18n(c),$(a).html(c);d=$("[i18n-placeholder]").length;for(b=0;b<d;b++)a=$("[i18n-placeholder]")[b],c=a.getAttribute("i18n-placeholder"),c=i18n(c),$(a).attr("placeholder",c);d=$("[i18n-value]").length;for(b=0;b<d;b++)a=$("[i18n-value]")[b],c=a.getAttribute("i18n-value"),c=i18n(c),
$(a).attr("value",c);d=$("[i18n-title]").length;for(b=0;b<d;b++)a=$("[i18n-title]")[b],c=a.getAttribute("i18n-title"),c=i18n(c),$(a).attr("title",c)}};
function addIconInbackground(d){var b=localStorage.main,b=JSON.parse(b),a=JSON.parse(localStorage.setting).iconNum.split("x"),c=parseInt(a[0]),a=parseInt(a[1]),c=c*a;if(0==b.length)b.push([d]);else for(a=0;a<b.length;a++)if(a<b.length-1){if(b[a].length<c){b[a].push(d);break}}else{b[a].length<c?b[a].push(d):b.push([d]);break}b=JSON.stringify(b);localStorage.main=b}
$(document).ready(function(){var d=Math.floor(10*Math.random())+1,b=$(".icobgColor:nth-child("+d+")").css("background-color");$(".icobgColor:nth-child("+d+")").css("border-color",b);$("#icon").css({"background-color":b});$("#addTitle").live("input",function(a){a=$("#addTitle").val().substring(0,4);$("#icon").text(a)});$(".icobgColorPre").live("click",function(a){$(".icobgColor").css("border-color","transparent");a=$(this).css("background-color");$(this).css("border-color",a);$("#icon").css({"background-color":a})});
chrome.tabs.getSelected(null,function(a){tabUrl=a.url;tabTitle=a.title;$("#addTitle").val(tabTitle);$("#addTitle").attr("url",tabUrl);$("#icon").text(tabTitle)});$("#addBu").live("click",function(a){localStorage.lastAdd="true";a=$("#addTitle").val();var b=$("#addTitle").attr("url"),d=$("#icon").css("background-color"),e={type:"custom",name:a,url:b,bgColor:d,title:a.substring(0,4),ico:""};chrome.tabs.query({title:""},function(a){for(var b=!0,c=0;c<a.length;c++)if(console.log(a[c]),0<=a[c].url.indexOf("chrome://newtab")){b=
!1;break}b?addIconInbackground(e):chrome.extension.sendMessage("dbfmnekepjoapopniengjbcpnbljalfg",e,function(a){})});$(this).val(i18n("Added"));$(this).attr("disabled","disabled");$(this).css("background-color","#ccc");$(this).css("box-shadow","none")});$setlang.ini()});