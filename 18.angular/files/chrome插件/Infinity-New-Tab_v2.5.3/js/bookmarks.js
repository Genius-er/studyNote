Favicon_Api="chrome://favicon/";function bookmarks(){_openbookmark=$setting.get("OpenBookmarksInNewtab")?"_blank":"_self";chrome.bookmarks.getTree(function(l){var b=l[0].children;for(var f=0;f<b.length;f++){if(f==0){var d='<div class="book">';d+='<div class="bookss">';d+='<div class="linksss" id="open_apps"><img class="booksss_ico" id="open_apps" src="img/apps.png"/>'+chrome.i18n.getMessage("application")+"</div></div>";for(var c=0;c<b[0].children.length;c++){if(typeof(b[0].children[c]).children=="object"){d+='<div class="booksss" bookindex="0" bookid="'+b[0].children[c].id+'" parentId="'+b[0].children[c].parentId+'" type="books">'+b[0].children[c].title;d+="</div>"}else{d+='<div class="linksss" bookindex="0" bookid="'+b[0].children[c].id+' " bookurl="'+b[0].children[c].url+'" type="links"><img class="linksss_ico" " bookurl="'+b[0].children[c].url+'" src="'+Favicon_Api+b[0].children[c].url+'"/>'+b[0].children[c].title;d+="</div>"}}d+="</div>";try{d+='<div class="other" ><div id="more" bookindex="0" class="linksss">Â»</div>';for(var h=1;h<b.length;h++){d+='<div class="booksss" bookindex="0" id="other_bookmarks" bookid="'+b[h].id+'" parentId="'+b[h].parentId+'">'+b[h].title+"</div>"}d+='<div class="linksss" bookindex="0" id="manage_bookmarks"><img class="booksss_ico" src="img/bookmarks.png" id="manage_bookmarks"/>'+chrome.i18n.getMessage("bookmark_manage")+"</div></div>"}catch(k){}d+="</div>";$(".BookmarkBar").append(stripscript(d))}}})}function load_bookmarks(){_new_book=false;_p_id2=0;_book_id="";_bigest_index=0;$(document).mousedown(function(a){if(a.target.id=="manage_bookmarks"){chrome.tabs.getCurrent(function(c){var b=c.index+1;chrome.tabs.create({"index":b,"url":"chrome://bookmarks/"},function(){return false})})}});$(document).mousedown(function(a){if(a.target.id=="open_apps"){chrome.tabs.getCurrent(function(c){var b=c.index+1;chrome.tabs.create({"index":b,"url":"chrome://apps/"},function(){return false})})}});$(document).click(function(b){if(b.which==1||b.which==2){if((b.target.className=="linksss"||b.target.className=="linksss_ico")&&b.target.id!="open_apps"&&b.target.id!="manage_bookmarks"&&b.target.id!="more"){var a=$(b.target).attr("bookurl");if(b.which==1){if(a.indexOf("chrome://")==0){chrome.tabs.getCurrent(function(d){var c=d.index+1;chrome.tabs.create({"index":c,"url":a},function(){return false})})}else{if(window.event.ctrlKey){window.open(a,"_blank")}else{window.open(a,_openbookmark)}}return false}if(b.which==2){if(a.indexOf("chrome://")==0){chrome.tabs.getCurrent(function(d){var c=d.index+1;chrome.tabs.create({"index":c,"url":a},function(){return false})})}else{window.open(a,"_blank")}}return false}}});$(document).click(function(h){if(h.target.className=="booksss"){$(".newbook").remove();$(".newbook2").remove();$my.G_SlideOut=false;var g=h.target;_book_id="";_new_book=true;var c=$(window).width();var f=$(g).offset().left;var b=c-f;var a=$(g).attr("bookindex");a=parseInt(a);a+=1;var d=$(g).attr("bookid");if(f<=c/2){var i='<div bookindex="'+a+'" class="newbook" style="left:'+f+'px">'}else{var i='<div bookindex="'+a+'" class="newbook" style="right:'+b+'px">'}i+='<div class="newclear" type="links"></div>';chrome.bookmarks.getChildren(d,function(j){if(j.length==0){i+='<div class="newlinks" type="links"  ><img class="newlinkico" src="img/false.png"/>'+chrome.i18n.getMessage("emp")+"</div>"}else{for(var e=0;e<j.length;e++){if(typeof(j[e].url)=="undefined"){i+='<div bookindex="'+a+'" class="newbooks" type="books" bookid="'+j[e].id+'" parentId="'+j[e].parentId+'" >'+j[e].title+"</div>"}else{i+='<div bookindex="'+a+'" class="newlinks" type="links" bookurl="'+j[e].url+'" bookid="'+j[e].id+'" parentId="'+j[e].parentId+'" ><img class="newlinkico" src="'+Favicon_Api+j[e].url+'"/>'+j[e].title+"</div>"}}}i+='<div class="newclear" type="links" style="height:4px;"></div>';i+="</div>";$("#all").append(stripscript(i))})}});$(document).mouseover(function(h){if(_new_book==false){return false}if(h.target.className=="booksss"){$(".newbook").remove();$(".newbook2").remove();$my.G_SlideOut=false;var g=h.target;_book_id="";var c=$(window).width();var f=$(g).offset().left;var b=c-f;var a=$(g).attr("bookindex");a=parseInt(a);a+=1;var d=$(g).attr("bookid");if(f<=c/2){var i='<div bookindex="'+a+'" class="newbook" style="left:'+f+'px">'}else{var i='<div bookindex="'+a+'" class="newbook" style="right:'+b+'px">'}i+='<div class="newclear" type="links"></div>';chrome.bookmarks.getChildren(d,function(j){if(j.length==0){i+='<div class="newlinks" type="links"  ><img class="newlinkico" src="img/false.png"/>'+chrome.i18n.getMessage("emp")+"</div>"}else{for(var e=0;e<j.length;e++){if(typeof(j[e].url)=="undefined"){i+='<div bookindex="'+a+'" class="newbooks" type="books" bookid="'+j[e].id+'" parentId="'+j[e].parentId+'" >'+j[e].title+"</div>"}else{i+='<div bookindex="'+a+'" class="newlinks" type="links" bookurl="'+j[e].url+'" bookid="'+j[e].id+'" parentId="'+j[e].parentId+'"><img class="newlinkico" src="'+Favicon_Api+j[e].url+'"/>'+j[e].title+"</div>"
}}}i+='<div class="newclear" type="links" style="height:4px;"></div>';i+="</div>";$("#all").append(stripscript(i))})}});$(document).mousedown(function(a){if(a.target.className!="newbooks"&&a.target.className!="newlinks"&&a.target.className!="newbook"&&a.target.className!="newlinkico"&&a.target.className!="booksss"){$(".newbook").remove();$(".newbook2").remove();_new_book=false;$my.G_SlideOut=true}});$(document).mouseover(function(j){if(j.target.className=="newbooks"){$my.G_SlideOut=false;var f=j.target;var i=$(f).attr("parentId");i=parseInt(i);_p_id2=parseInt(_p_id2);var n=_p_id2.toString();var g=$(f).attr("bookid");var h=$(f).attr("bookindex");h=parseInt(h);if((_p_id2>=i)&&(g!=_book_id)){try{for(var d=h+1;d<_bigest_index+1;d++){$("[bookindex="+d+"]").remove()}}catch(j){}}if(g==_book_id){return false}h+=1;if(_bigest_index<=h){_bigest_index=h}var b=$(window).width();var q=$(window).height();var c=$(f).offset().left;var m=$(f).offset().top-30;var k=c+330;var p=b-c;var o=$(f).attr("bookid");if(c<=b/2){var a='<div bookindex="'+h+'" class="newbook2" style="left:'+k+'px;">'}else{var a='<div bookindex="'+h+'" class="newbook2" style="right:'+p+'px;">'}a+='<div class="newclear" type="links"></div>';chrome.bookmarks.getChildren(o,function(l){if(l.length==0){a+='<div bookindex="'+h+'" class="newlinks" type="links"  ><img class="newlinkico" src="img/false.png"/>'+chrome.i18n.getMessage("emp")+"</div>"}else{for(var e=0;e<l.length;e++){if(typeof(l[e].url)=="undefined"){a+='<div bookindex="'+h+'" class="newbooks" type="books" bookid="'+l[e].id+'" parentId="'+l[e].parentId+'">'+l[e].title+"</div>"}else{a+='<div bookindex="'+h+'" class="newlinks" type="links" bookurl="'+l[e].url+'" bookid="'+l[e].id+'"><img class="newlinkico" src="'+Favicon_Api+l[e].url+'"/>'+l[e].title+"</div>"}}}a+='<div class="newclear" type="links" style="height:4px;"></div>';a+="</div>";$("#all").append(stripscript(a))});_p_id2=i;_book_id=g}});$(document).click(function(g){if(g.target.id=="more"){$my.G_SlideOut=false;$(".newbook").remove();$(".newbook2").remove();_book_id="";_new_book=true;var f=g.target;var i=$(f).offset().left;for(var a=0;a<$(".book").children().length;a++){var c=$($(".book").children()[a]).offset().left;if(i<c+152){var d=a;break}}var b=$(f).attr("bookindex");b=parseInt(b);b+=1;var h='<div bookindex="'+b+'" class="newbook" style="right:0px">';h+='<div class="newclear" type="links"></div>';chrome.bookmarks.getTree(function(k){var j=k[0].children[0].children;if(j.length==0){h+='<div class="newlinks" type="links"  ><img class="newlinkico" src="img/false.png"/>'+chrome.i18n.getMessage("emp")+"</div>"}else{for(var e=a;e<j.length;e++){if(typeof(j[e].url)=="undefined"){h+='<div bookindex="'+b+'" class="newbooks" type="books" bookid="'+j[e].id+'" parentId="'+j[e].parentId+'" >'+j[e].title+"</div>"}else{h+='<div bookindex="'+b+'" class="newlinks" type="links" bookurl="'+j[e].url+'" bookid="'+j[e].id+'" parentId="'+j[e].parentId+'" ><img class="newlinkico" src="'+Favicon_Api+j[e].url+'"/>'+j[e].title+"</div>"}}}h+='<div class="newclear" type="links" style="height:4px;"></div>';h+="</div>";$("#all").append(stripscript(h))})}});$(document).mouseover(function(g){if(g.target.id=="more"){if(_new_book==false){return false}$my.G_SlideOut=false;$(".newbook").remove();$(".newbook2").remove();_book_id="";var f=g.target;var i=$(f).offset().left;for(var a=0;a<$(".book").children().length;a++){var c=$($(".book").children()[a]).offset().left;if(i<c+152){var d=a;break}}var b=$(f).attr("bookindex");b=parseInt(b);b+=1;var h='<div bookindex="'+b+'" class="newbook" style="right:0px">';h+='<div class="newclear" type="links"></div>';chrome.bookmarks.getTree(function(k){var j=k[0].children[0].children;if(j.length==0){h+='<div class="newlinks" type="links"  ><img class="newlinkico" src="img/false.png"/>'+chrome.i18n.getMessage("emp")+"</div>"}else{for(var e=a;e<j.length;e++){if(typeof(j[e].url)=="undefined"){h+='<div bookindex="'+b+'" class="newbooks" type="books" bookid="'+j[e].id+'" parentId="'+j[e].parentId+'" >'+j[e].title+"</div>"}else{h+='<div bookindex="'+b+'" class="newlinks" type="links" bookurl="'+j[e].url+'" bookid="'+j[e].id+'" parentId="'+j[e].parentId+'" ><img class="newlinkico" src="'+Favicon_Api+j[e].url+'"/>'+j[e].title+"</div>"}}}h+='<div class="newclear" type="links" style="height:4px;"></div>';h+="</div>";$("#all").append(stripscript(h))})}});$(document).click(function(c){_openbookmark=$setting.get("OpenBookmarksInNewtab")?"_blank":"_self";if(c.which==1||c.which==2){if(c.target.className=="newlinks"||c.target.className=="newlinkico"){if(c.target.className=="newlinkico"){var b=c.target.parentNode}else{var b=c.target}var a=$(b).attr("bookurl");$(".newbook").remove();$(".newbook2").remove();if(c.which==1){if(a.indexOf("chrome://")==0){chrome.tabs.getCurrent(function(e){var d=e.index+1;chrome.tabs.create({"index":d,"url":a},function(){return false})})}else{if(window.event.ctrlKey){window.open(a,"_blank")}else{window.open(a,_openbookmark)}}}if(c.which==2){if(a.indexOf("chrome://")==0){chrome.tabs.getCurrent(function(e){var d=e.index+1;
chrome.tabs.create({"index":d,"url":a},function(){return false})})}else{window.open(a,"_blank")}}_new_book=false;$my.G_SlideOut=true;return false}}});return false};