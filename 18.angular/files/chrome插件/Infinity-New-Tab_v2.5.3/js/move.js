window.$drag=function(){document.ondragover=function(a){a.preventDefault()};$(".icon").live("dragstart",function(a){$(this).parent().attr("drop","true");var b=$(this).parent().parent().index(),f=$(this).index(),d=getDragId(),c=$(this)[0];1!=JSON.parse(localStorage.main).length&&$("#right,#left").show();$(c)[0].ondrag=function(b){$(c).before('<div id="'+d+'"></div>');$(c).remove()};console.log(c);$(c)[0].ondragend=function(a){a=$("#"+d).parent().parent().index();var c=$("#"+d).index(),g=getCurrentNum();
$("#"+d).remove();$("#right,#left").hide();$("#right,#left").css("opacity","0");$("#right,#left").attr("do","true");$(".groupIn").attr("drop","false");$("#noti").fadeOut(100);var e=JSON.parse(localStorage.main);c!=g&&(g=e[b][f],e[b].splice(f,1),e[a].splice(c,0,g));0==e[b].length&&e.splice(b,1);$iconIni.load(e);localStorage.main=JSON.stringify(e);$(".point").css("background-color","");$(".point:nth-child("+(a+1)+")").css("background-color",i18n("pointColor"));$setting.sync();setAllNotiNum();G_Infinity_Open_Lock=
!1;Show_Noti_Num=!0}});$("#right").live("dragover",function(a){if($("#mainAll").is(":animated"))return!1;var b=getDragId();$(this).css("opacity",1);"true"==$(this).attr("do")&&($(".groupIn").attr("drop","false"),$("#noti").fadeOut(100),$onSlide.toLeft("#mainAll",function(a){var d=getCurrentNum(),c=$(".group:nth-child("+a+")").children().children().length;$("#"+b).insertAfter($(".group:nth-child("+a+")").children().children(":last"));c==d?($notification.show(i18n("NoSpace")),$("#"+b).hide()):($("#"+
b).show(),$(".group:nth-child("+a+")").children().attr("drop","true"))}),$(this).attr("do","false"))});$("#left").live("dragover",function(a){if($("#mainAll").is(":animated"))return!1;var b=getDragId();$(this).css("opacity",1);"true"==$(this).attr("do")&&($(".groupIn").attr("drop","false"),$("#noti").fadeOut(100),$onSlide.toRight("#mainAll",function(a){var d=getCurrentNum();if("last"==a){var c=$(".group:last").children().children().length;$("#"+b).insertAfter($(".group:last").children().children(":last"));
c==d?($("#"+b).hide(),$notification.show(i18n("NoSpace"))):($("#"+b).show(),$(".group:last").children().attr("drop","true"))}else c=$(".group:nth-child("+a+")").children().children().length,$("#"+b).insertAfter($(".group:nth-child("+a+")").children().children(":last")),c==d?($("#"+b).hide(),$notification.show(i18n("NoSpace"))):($("#"+b).show(),$(".group:nth-child("+a+")").children().attr("drop","true"))}),$(this).attr("do","false"))});$("#right,#left").live("dragleave",function(a){$(this).css("opacity",
0);$("#right,#left").attr("do","true")});$(".icon").live("dragover",function(a){if("true"==$(this).parent().attr("drop")){a=getDragId();var b=$("#"+a).index(),f=$(this).index();f<b&&$("#"+a).insertBefore($(this));f>b&&$("#"+a).insertAfter($(this))}})};function getDragId(){var a=$setting.get("iconNum");if("2x5"==a)var b="dragIn1";"3x4"==a&&(b="dragIn2");"3x5"==a&&(b="dragIn3");"3x6"==a&&(b="dragIn4");return b}
function getCurrentNum(){var a=$setting.get("iconNum").split("x"),b=parseInt(a[0]),a=parseInt(a[1]);return b*a};